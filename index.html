<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dark Mode Star Rating App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #121212;
        color: #f1f1f1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        margin: 0;
    }

    .container {
        background: #1c1c1c;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(0,0,0,0.5);
        max-width: 600px;
        width: 90%;
        margin-top: 30px;
        text-align: center;
    }

    h1 {
        margin-bottom: 20px;
    }

    input {
        padding: 12px;
        font-size: 18px;
        border-radius: 6px;
        border: none;
        outline: none;
        width: 80%;
        margin-bottom: 20px;
        background-color: #1f1f1f;
        color: #f1f1f1;
    }

    .star-rating {
        display: flex;
        justify-content: center;
        font-size: 50px;
        cursor: pointer;
        margin-bottom: 20px;
    }

    .star {
        color: #444;
        transition: color 0.2s;
    }

    .star.lit {
        color: gold;
    }

    button {
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        border-radius: 6px;
        background-color: #333;
        color: white;
        cursor: pointer;
        margin-top: 10px;
    }

    button:hover {
        background-color: #444;
    }

    .results-list {
        margin-top: 30px;
        background: #222;
        padding: 20px;
        border-radius: 8px;
        text-align: left;
    }

    .result-item {
        margin: 5px 0;
    }

    .average {
        margin-top: 15px;
        font-weight: bold;
        font-size: 18px;
        color: #ffcc00;
    }
</style>
</head>
<body>

<div class="container">
    <h1>⭐ Rate Someone</h1>
    <input type="text" id="nameInput" placeholder="Enter name to rate...">
    
    <div class="star-rating" id="stars">
        <span class="star" data-value="1">★</span>
        <span class="star" data-value="2">★</span>
        <span class="star" data-value="3">★</span>
        <span class="star" data-value="4">★</span>
        <span class="star" data-value="5">★</span>
    </div>

    <div id="resultText">No rating yet</div>
    <button id="newPersonBtn" style="display:none;">New Person</button>

    <div id="ratingsList" class="results-list" style="display:none;">
        <h3>All Ratings:</h3>
        <div id="allRatings"></div>
        <div class="average" id="averageRating"></div>
    </div>
</div>

<script>
    const stars = document.querySelectorAll('.star');
    const resultText = document.getElementById('resultText');
    const nameInput = document.getElementById('nameInput');
    const newPersonBtn = document.getElementById('newPersonBtn');
    const ratingsList = document.getElementById('ratingsList');
    const allRatings = document.getElementById('allRatings');
    const averageRating = document.getElementById('averageRating');

    let ratingsData = [];
    let selectedRating = 0;

    stars.forEach(star => {
        star.addEventListener('click', () => {
            selectedRating = parseInt(star.getAttribute('data-value'));

            // Light up stars up to the clicked one
            stars.forEach(s => s.classList.remove('lit'));
            for (let i = 0; i < selectedRating; i++) {
                stars[i].classList.add('lit');
            }

            // Display result
            const name = nameInput.value.trim() || "Unnamed";
            resultText.textContent = `${name} rated ${selectedRating} star${selectedRating > 1 ? 's' : ''}`;

            // Save rating
            ratingsData.push({ name, rating: selectedRating });

            // Show New Person button
            newPersonBtn.style.display = 'inline-block';

            // If at least 2 ratings, show list
            if (ratingsData.length >= 2) {
                updateRatingsList();
            }
        });

        star.addEventListener('mouseover', () => {
            const hoverValue = parseInt(star.getAttribute('data-value'));
            stars.forEach(s => s.classList.remove('lit'));
            for (let i = 0; i < hoverValue; i++) {
                stars[i].classList.add('lit');
            }
        });

        star.addEventListener('mouseout', () => {
            stars.forEach(s => s.classList.remove('lit'));
            for (let i = 0; i < selectedRating; i++) {
                stars[i].classList.add('lit');
            }
        });
    });

    newPersonBtn.addEventListener('click', () => {
        nameInput.value = '';
        resultText.textContent = 'No rating yet';
        stars.forEach(s => s.classList.remove('lit'));
        selectedRating = 0;
        newPersonBtn.style.display = 'none';
    });

    function updateRatingsList() {
        allRatings.innerHTML = '';
        let total = 0;

        ratingsData.forEach(entry => {
            total += entry.rating;
            const div = document.createElement('div');
            div.classList.add('result-item');
            div.textContent = `${entry.name}: ${entry.rating} ★`;
            allRatings.appendChild(div);
        });

        let avg = (total / ratingsData.length).toFixed(2);
        averageRating.textContent = `Average Rating: ${avg} ★`;
        ratingsList.style.display = 'block';
    }
</script>

</body>
</html>
